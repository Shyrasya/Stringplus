# Decimal

## Содержание

1. [О проекте](#о-проекте)
2. [Особенности проекта](#особенности-проекта)
3. [Makefile](#makefile)
4. [Участники проекта](#участники-проекта)

## О проекте

В данном учебном проекте "Школы 21" была реализована библиотека s21_decimal.h на языке C (стандарта 11). Данная библиотека предоставляет работу с типом **"Decimal"** (отсутствует в языке C), который представляет собой десятичные числа в диапзоне от + 79,228,162,514,264,337,593,543,950,335 до - 79,228,162,514,264,337,593,543,950,335 (по умолчанию 0). Decimal применяется в финансовых расчетах, где необходимы большие количества значимых целых и дробных цифр, а также для исключения ошибок округления.

В двоичной системе исчисления Decimal выглядит как 96-разрядное целое число, коэффициент масштабирования и 1-разрядный знак. Коэффициент масштабирования (по умолчанию 10, возведенное в степень в диапазоне от 0 до 28) используется для деления целого числа и указания того, какая его часть является десятичной дробью.

Decimal можно представить в виде структуры с четырехэлементным массивом int:

``
typedef struct {
  int bits[4];
} s21_decimal;
``

bits[0], bits[1], bits[2] - это младшие, средние, старшие 32 бита 96-разрядного целого числа.
bits[3] - коэффицент масштабироваия (с 16 по 23 бит) и знак (31 бит). Остальные биты равны 0 и не используются.

### Список возможностей программы:

* Тип Decimal поддерживает арифметические операторы:
	* сложение +;
	* вычитание -;
	* умножение *;
	* деление /.

	Функции операций возвращают значения:
	* 0 - успешно;
	* 1 - число слишком велико или равно бесконечности;
	* 2 - число слишком мало или равно отрицательной бесконечности;
	* 3 - деление на 0.

	>Если получившееся число не помещается в мантиссу, то используется банковское округление - число округляется до ближайшего значения, при котором последняя цифра после десятичной точки является четной. Если две округленные цифры равноудалены от исходного значения, то выбирается более близкое четное число.

* Доступны следующие операторы сравнения:
	* меньше <;
	* меньше или равно <=;
	* больше >;
	* больше или равно >=;
	* равно ==;
	* не равно !=.
	Код возврата:
	* 0 - FALSE;
	* 1 - TRUE;
* Decimal можно преобразовать в другие типы:
	* из int в decimal;
	* из float в decimal;
	* в int из decimal;
	* в float из decimal.
	Код возврата:
	* 0 - успешно;
	* 1 - ошибка конвертации;
	
	Дополнения по типу float:
	* если числа слишком малы (0 < |x| < 1e-28), возвращается ошибка и значение 0;
	* если числа слишком велики (|x| > 79,228,162,514,264,337,593,543,950,335) или равны бесконечности, возвращается ошибка;
	* При обработке числа с типом float преобразовываются все содержащиеся в нём значимые десятичные цифры. Если таких цифр больше 7, то значение числа округляется к ближайшему, у которого не больше 7 значимых цифр.

	Дополнения по переводу из decimal в int:
	* Если в decimal есть дробная часть, то она отбрасывается.

* Существуют прочие функции:
	* floor - округляет decimal до ближайшего целого числа в сторону отрицательной бесконечности;
	* round - округляет decimal до ближайшего целого числа;
	* truncate - возвращает целые цифры decimal числа (любые дробные цифры отбрасываются, включая конечные нули);
	* negate - возвращает результат умножения decimal на -1;
	
	Код возврата:
	* 0 - успешно;
	* 1 - ошибка конвертации.

## Особенности проекта

В рамках учебного проекта неоходимо было соответствовать следующим требованиям:
* Программа разработана в соответствии с принципами объектно-ориентированного программирования и использованием компилятора gcc;
* При написании кода необходимо придерживаться Google Style;
* Использования префикса "s21_" в названии каждой функции; 
* Функции библиотеки покрываются unit-тестами не менее 80%(используется библиотека Check);
* Конечные нули можно как оставлять, так и удалять (за исключением функции s21_truncate);
* В битовом представлении есть разница между отрицательные и положительные нули. Эти значения могут считаться эквивалентными во всех операциях проекта.

## Makefile

Makefile проекта содержит следующие цели:

&nbsp;&nbsp;&nbsp;&nbsp;``all`` - включает в себя цели clean, s21_decimal.a, test, gcov_report;

&nbsp;&nbsp;&nbsp;&nbsp;``test`` - Запускает unit-тесты на проверку функций библиотеки s21_decimal.h с помощью библиотеки Check;

&nbsp;&nbsp;&nbsp;&nbsp;``s21_decimal.a`` - создание статической библиотеки на основе объектного файла s21_decimal.o;

&nbsp;&nbsp;&nbsp;&nbsp;``gcov_report`` - генерация html-отчета с помощью lcov для измерения покрытия кода тестами;

&nbsp;&nbsp;&nbsp;&nbsp;``check`` - анализирует код на стилистические нормы;

&nbsp;&nbsp;&nbsp;&nbsp;``clean`` - удаляет файлы, созданные во время прохождения тестов, отчеты о покрытии, объектные файлы.

## Участники проекта

| Участник      |            |
| ------------- | ------------------ |
| lenwooda, kristofs, ebbenwai | Арифметические операции;<br> Операторы сравнения;<br> Преобразователи;<br> Прочие функции;<br> Тесты к функциям |
| [lemongrb](https://github.com/Shyrasya) | Оператор равенства ==;<br> Умножение, деление decimal на 10;<br> Перевод из decimal в int;<br>Функция is_overflow;<br> Тесты к выполненным функциям|



